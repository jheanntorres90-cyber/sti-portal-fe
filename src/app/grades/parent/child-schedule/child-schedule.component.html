<div class="p-4 sm:p-6 space-y-6 bg-gray-50 dark:bg-slate-950 min-h-screen animate-fadeIn">
  <!-- Welcome Section -->
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Child's Schedule</h2>
    <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">View your child's class schedule and timetable</p>
  </div>

  <!-- Student Selector -->
  <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl p-4 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-4">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 bg-gradient-to-br from-green-600 to-green-400 rounded-2xl flex items-center justify-center text-white font-bold text-lg">
        {{ selectedStudentAvatar }}
      </div>
      <div>
        <h3 class="font-bold text-gray-800 dark:text-white">{{ selectedStudentName }}</h3>
        <p class="text-xs text-gray-500 dark:text-gray-400">{{ selectedStudentCourse }}</p>
      </div>
    </div>
    <div>
      <select 
        [(ngModel)]="selectedStudentId" 
        (ngModelChange)="onStudentChange($event)"
        class="w-full sm:w-64 px-4 py-2.5 bg-gray-50 dark:bg-slate-800 border dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"
      >
        <option *ngFor="let student of students" [value]="student.id">
          {{ student.name }} - {{ student.course }}
        </option>
      </select>
    </div>
  </div>

  <!-- Filters -->
  <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl p-4 shadow-sm">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">School Year & Term</label>
        <select 
          [(ngModel)]="selectedTerm"
          (ngModelChange)="onFilterChange()"
          class="w-full px-4 py-2.5 bg-gray-50 dark:bg-slate-800 border dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"
        >
          <option *ngFor="let term of terms" [value]="term">{{ term }}</option>
        </select>
      </div>
      <div>
        <label class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">View Type</label>
        <select 
          [(ngModel)]="viewMode"
          (ngModelChange)="onViewModeChange($event)"
          class="w-full px-4 py-2.5 bg-gray-50 dark:bg-slate-800 border dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"
        >
          <option value="weekly">Weekly View</option>
          <option value="list">List View</option>
        </select>
      </div>
      <div>
        <label class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">Day</label>
        <select 
          [(ngModel)]="selectedDay"
          (ngModelChange)="onFilterChange()"
          class="w-full px-4 py-2.5 bg-gray-50 dark:bg-slate-800 border dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"
        >
          <option *ngFor="let day of days" [value]="day.value">{{ day.label }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Schedule Summary -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 p-6 rounded-2xl shadow-sm">
      <div class="text-3xl font-bold text-gray-800 dark:text-white leading-none">{{ summary.totalSubjects }}</div>
      <div class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Total Subjects</div>
    </div>
    <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 p-6 rounded-2xl shadow-sm">
      <div class="text-3xl font-bold text-gray-800 dark:text-white leading-none">{{ summary.weeklyHours }}</div>
      <div class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Weekly Hours</div>
    </div>
    <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 p-6 rounded-2xl shadow-sm">
      <div class="text-3xl font-bold text-gray-800 dark:text-white leading-none">{{ summary.classesToday }}</div>
      <div class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Classes Today</div>
    </div>
    <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 p-6 rounded-2xl shadow-sm">
      <div class="text-3xl font-bold text-gray-800 dark:text-white leading-none">{{ summary.daysWithClasses }}</div>
      <div class="text-sm text-gray-500 dark:text-gray-400 font-medium mt-1">Days with Classes</div>
    </div>
  </div>

<!-- Today's Classes - New Design -->
<div class="bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl shadow-sm overflow-hidden">

  <!-- Header -->
  <div class="p-6 border-b dark:border-slate-800 flex items-center justify-between">
    <h3 class="text-lg font-bold text-gray-800 dark:text-white">
      Today's Classes
    </h3>
    <span class="text-sm text-gray-500 dark:text-gray-400">
      {{ todayDate }}
    </span>
  </div>

  <!-- Class List -->
  <div class="p-4 space-y-3">

    <!-- Empty State -->
    <div *ngIf="todayClasses.length === 0"
         class="text-center py-8 text-gray-500 dark:text-gray-400">
      No classes scheduled for today
    </div>

    <!-- Class Card -->
    <div *ngFor="let class of todayClasses"
         class="relative flex items-center gap-6 bg-gray-100 dark:bg-slate-800/60 
                rounded-xl px-5 py-4 transition hover:shadow-md">

      <!-- Left Blue Accent -->
      <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-blue-600 rounded-l-xl"></div>

      <!-- Time -->
      <div class="min-w-[120px] text-sm font-semibold text-blue-600 dark:text-blue-400">
        {{ class.time }}
      </div>

      <!-- Divider -->
      <div class="hidden sm:block h-8 w-px bg-gray-300 dark:bg-slate-700"></div>

      <!-- Details -->
      <div class="flex-1">
        <div class="font-semibold text-gray-800 dark:text-white">
          {{ class.course }}
        </div>

        <div class="text-xs text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap gap-2">
          <span>{{ class.section }}</span>
          <span>•</span>
          <span>{{ class.professor }}</span>
          <span>•</span>
          <span>{{ class.room }}</span>
        </div>
      </div>

    </div>
  </div>
</div>


  <!-- Weekly Schedule Card -->
  <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl shadow-sm overflow-hidden">
    <div class="p-6 border-b dark:border-slate-800 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
      <h3 class="text-lg font-bold text-gray-800 dark:text-white">Weekly Schedule</h3>
      <div class="flex items-center gap-3">
        <div class="bg-gray-100 dark:bg-slate-800 p-1 rounded-xl border border-gray-200 dark:border-slate-700 flex shadow-sm">
          <button (click)="viewMode = 'weekly'" 
            [class]="viewMode === 'weekly' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-500 hover:bg-gray-200 dark:hover:bg-slate-700'"
            class="px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2">
            <i class="fas fa-table"></i> Table View
          </button>
          <button (click)="viewMode = 'list'" 
            [class]="viewMode === 'list' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-500 hover:bg-gray-200 dark:hover:bg-slate-700'"
            class="px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2">
            <i class="fas fa-list"></i> List View
          </button>
        </div>
      </div>
    </div>

    <!-- Table View -->
    <div *ngIf="viewMode === 'weekly'" class="overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-gray-50 dark:bg-slate-800/50 text-gray-500 dark:text-slate-400 text-xs uppercase font-bold tracking-wider">
            <th class="p-4 border-b dark:border-slate-800">Time</th>
            <th *ngFor="let day of weekDays" class="p-4 border-b dark:border-slate-800">{{ day }}</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-slate-800 text-sm">
          <tr *ngFor="let slot of scheduleTable" class="hover:bg-gray-50 dark:hover:bg-slate-800/20">
            <td class="p-4 font-medium text-gray-600 dark:text-gray-400 whitespace-nowrap border-r dark:border-slate-800">
              {{ slot.time }}
            </td>
            <td *ngFor="let day of weekDaysLower" class="p-2 min-w-[180px]">
              <div *ngIf="slot[day]" (click)="openClassDetails(slot[day])"
                class="p-3 rounded-xl border transition-all cursor-pointer hover:shadow-md active:scale-95"
                [ngClass]="{
                  'bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800': true
                }">
                <div class="text-blue-700 dark:text-blue-400 font-bold text-xs mb-1">{{ classData[slot[day]].code }}</div>
                <div class="text-gray-800 dark:text-gray-100 font-medium text-sm leading-tight mb-2">{{ classData[slot[day]].name }}</div>
                <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-slate-400">
                  <span><i class="fas fa-door-open mr-1"></i> {{ classData[slot[day]].room }}</span>
                  <span><i class="fas fa-user-tie mr-1"></i> {{ classData[slot[day]].professor }}</span>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- List View -->
<div *ngIf="viewMode === 'list'" class="p-6 space-y-8">

  <div *ngFor="let dayData of listScheduleData" class="space-y-4">

    <div class="bg-[#264f8f] text-white px-5 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-sm">
      <i class="fas fa-calendar-day text-sm"></i>
      {{ dayData.day }}
    </div>

    <div class="space-y-3">

      <div *ngFor="let classKey of dayData.classes"
           (click)="openClassDetails(classKey)"
           class="relative flex items-center gap-6 
                  bg-gray-200 dark:bg-slate-800/60 
                  rounded-xl px-5 py-4 
                  cursor-pointer 
                  transition hover:shadow-md">
        <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-blue-600 rounded-l-xl"></div>
        <div class="min-w-[140px] text-sm font-semibold text-blue-700 dark:text-blue-400">
          {{ classData[classKey].time }}
        </div>
        <div class="hidden sm:block h-8 w-px bg-gray-300 dark:bg-slate-700"></div>
        <div class="flex-1">
          <div class="font-semibold text-gray-800 dark:text-white">
            {{ classData[classKey].name }}
          </div>

          <div class="text-xs text-gray-600 dark:text-gray-400 mt-1 flex items-center gap-4 flex-wrap">
            <span class="flex items-center gap-1">
              <i class="fas fa-door-open text-xs"></i>
              {{ classData[classKey].room }}
            </span>

            <span class="flex items-center gap-1">
              <i class="fas fa-user text-xs"></i>
              {{ classData[classKey].professor }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Class Details Modal -->
  <div *ngIf="isModalOpen" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
    <div class="bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden">
      <div class="p-6 bg-blue-600 text-white relative">
        <button (click)="closeModal()" class="absolute top-4 right-4 hover:bg-white/20 p-2 rounded-full transition-colors">
          <i class="fas fa-times"></i>
        </button>
        <div class="text-xs font-bold uppercase tracking-wider opacity-80 mb-1">Class Details</div>
        <h3 class="text-2xl font-bold">{{ selectedClass?.code }}</h3>
        <p class="text-blue-100">{{ selectedClass?.name }}</p>
      </div>
      <div class="p-6 space-y-4">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider block mb-1">Professor</label>
            <div class="text-gray-800 dark:text-white font-medium">{{ selectedClass?.professor }}</div>
          </div>
          <div>
            <label class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider block mb-1">Room</label>
            <div class="text-gray-800 dark:text-white font-medium">{{ selectedClass?.room }}</div>
          </div>
          <div>
            <label class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider block mb-1">Schedule</label>
            <div class="text-gray-800 dark:text-white font-medium">{{ selectedClass?.schedule }}</div>
          </div>
          <div>
            <label class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider block mb-1">Units</label>
            <div class="text-gray-800 dark:text-white font-medium">{{ selectedClass?.units }}</div>
          </div>
          <div class="col-span-2">
            <label class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider block mb-1">Current Grade</label>
            <div class="text-gray-800 dark:text-white font-medium">{{ selectedClass?.grade || 'Not yet graded' }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>